{% extends "backView/templateBack.twig" %}


{% block content %}

<section class="projects-section bg-light" id="admin">
    <div class="container">
        <h2 class="mb-1">Dashboard</h2>
        <hr class="mb-2 ml-0" />

        {% if user.type == 'administrator' %}
            <h4 class="mb-5">Statut : Administrateur</h4>
        {% elseif user.type == 'author' %}
            <h4 class="mb-5">Statut : Auteur</h4>
        {% elseif user.type == 'moderator' %} 
            <h4 class="mb-5">Statut : Modérateur</h4>
        {% endif %}
            <div class="row no-gutters mb-4 mb-lg-5">

            {% if user.type == 'administrator' or user.type == 'author' %}
                <div class="col-lg-6 mb-5">
                    <h4 class="mb-4">Gestion des articles</h4>
                    <div class="featured-text text-center text-lg-left">
                        <div class="row justify-content-between no-gutters">
                            <div class="col-lg-12">
                                <p class="text-left text-black-50">
                                    <a href="index.php?admin=addpost" class="content-post-lg">AJOUTER UN ARTICLE >>>></a>
                                    <a href="index.php?admin=addpost" class="content-post-sm">AJOUTER UN ARTICLE</a>
                                </p>
                            </div>
                            <div class="col-lg-12">
                                <p class="text-left text-black-50">
                                    {% if user.type == 'administrator' %}
                                        <a href="index.php?admin=post" class="content-post-lg">AFFICHER TOUS LES ARTICLES >>>></a>
                                        <a href="index.php?admin=post" class="content-post-sm">TOUS LES ARTICLES</a>
                                    {% elseif user.type == 'author' %}
                                    <a href="index.php?admin=post" class="content-post-lg">AFFICHER TOUS MES ARTICLES >>>></a>
                                    <a href="index.php?admin=post" class="content-post-sm">TOUS MES ARTICLES</a>
                                    {% endif %}
                                </p>
                            </div>
                            <div class="col-lg-12">
                                <p class="text-left text-black-50">
                                    Nombre d'articles : <span class="badge badge-dark js-scroll-trigger text-right">{{ nbrPosts }}</span>
                                </p>
                            </div>
                            <div class="col-lg-12">
                                <p class="text-left text-black-50">
                                    {% if nbrPosts == 0 %}
                                        Aucun article n'a été ajouté
                                    {% else %}
                                        Dernier article ajouté : le 
                                        <span class="badge badge-dark js-scroll-trigger">{{ lastDatePost|date("d/m/Y") }}</span>
                                    {% endif %}
                                </p>
                            </div>
                        </div>
                        <hr class="d-block mb-0 ml-0 mr-5" />
                    </div>  
                </div>
            {% endif %}
            
                <div class="col-lg-6 mb-5">
                    <h4 class="mb-4">Gestion des commentaires</h4>
                    <div class="featured-text text-center text-lg-left">
                        <div class="row justify-content-between no-gutters">
                            <div class="col-lg-12">
                                <p class="text-left text-black-50">
                                    <a href="index.php?admin=validcomment" class="content-post-lg">COMMENTAIRES A VALIDER >>>></a>
                                    <a href="index.php?admin=validcomment" class="content-post-sm">COMMENTAIRES A VALIDER</a>
                                </p>
                            </div>
                            <div class="col-lg-12">
                                <p class="text-left text-black-50">
                                    <a href="index.php?admin=listcomments" class="content-post-lg">AFFICHER TOUS LES COMMENTAIRES >>>></a>
                                    <a href="index.php?admin=listcomments" class="content-post-sm">TOUS LES COMMENTAIRES</a>
                                </p>
                            </div>
                            <div class="col-lg-12">
                                <p class="text-left text-black-50">
                                    Nombre de commentaires a valider : <span class="badge badge-dark js-scroll-trigger text-right">{{ nbrCommentNoValid }}</span>
                                </p>
                            </div>
                            <div class="col-lg-12">
                                <p class="text-left text-black-50">
                                    Dernier commentaire ajouté : le 
                                    <span class="badge badge-dark js-scroll-trigger">{{ lastDateComment|date("d/m/Y") }}</span>
                                </p>
                            </div>
                        </div>
                        <hr class="d-block mb-0 ml-0 mr-5" />
                    </div>
                </div>

            {% if user.type == 'administrator' %}
                <div class="col-lg-6 mb-5">
                    <h4 class="mb-4">Gestion des utilisateurs</h4>
                    <div class="featured-text text-center text-lg-left">
                        <div class="row justify-content-between no-gutters">
                            <div class="col-lg-12">
                                <p class="text-left text-black-50">
                                    <a href="index.php?admin=adduser" class="content-post-lg">AJOUTER UN UTILISATEUR >>>></a>
                                    <a href="index.php?admin=adduser" class="content-post-sm">AJOUTER UN UTILISATEUR</a>
                                </p>
                            </div>
                            <div class="col-lg-12">
                                <p class="text-left text-black-50">
                                    <a href="index.php?admin=listusers" class="content-post-lg">AFFICHER TOUS LES UTILISATEURS >>>></a>
                                    <a href="index.php?admin=listusers" class="content-post-sm">TOUS LES UTILISATEURS</a>
                                </p>
                            </div>
                            <div class="col-lg-12">
                                <p class="text-left text-black-50">
                                    Nombre d'utilisateurs enregistré : <span class="badge badge-dark js-scroll-trigger text-right">{{ nbrUser }}</span>
                                </p>
                            </div>
                            <div class="col-lg-12">
                                <p class="text-left text-black-50">
                                    Dernier utilisateur ajouté : 
                                    <span class="badge badge-dark js-scroll-trigger">{{ lastAddedUser.userName }}</span>
                                       le    <span class="badge badge-dark js-scroll-trigger">{{ lastAddedUser.registerDate|date("d/m/Y") }}</span>
                                </p>
                            </div>
                        </div>
                        <hr class="d-block mb-0 ml-0 mr-5" />
                    </div>
                </div>
            {% endif %}
                <div class="col-lg-6">
                    <h4 class="mb-4">Profil</h4>
                    <div class="featured-text text-center text-lg-left">
                        <div class="row justify-content-between no-gutters">
                            <div class="col-lg-12 mb-4" id="backHomeProfil">
                                <div class="d-inline mr-3">
                                    {% if user.profilPicture is null %}
                                        <img src="public/assets/img/userImg/profil.png" alt="Photo de profil" id="profilPicture"/>
                                    {% else %}
                                        <img src={{ constant('USER_IMG_DIRECTORY') ~ user.profilPicture }} alt="Photo de profil" id="profilPicture"/>
                                    {% endif %}
                                </div>
                                <h3 class="text-left text-black-50 d-inline">{{ user.userName }}</h3>
                            </div>
                            
                            <div class="col-lg-12 mb-3">
                                <p class="text-left text-black-50">
                                    <a href="{{ 'index.php?admin=profil&id=' ~ user.userId }}" class="content-post-lg">MODIFIER LE PROFIL >>>></a>
                                    <a href="{{ 'index.php?admin=profil&id=' ~ user.userId }}" class="content-post-sm">MODIFIER LE PROFIL</a>
                                </p>
                            </div>
                        </div>
                        <hr class="d-block mb-0 ml-0 mr-5" />
                    </div> 
                </div>
            </div>
    </div>
</section>

{% endblock %}

